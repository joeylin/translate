<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8"> 
        <title>Translate</title>
        <meta name="generator" content="translate" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
        <!-- bootstrap 3.0.2 -->
        <link href="/public/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <!-- font Awesome -->
        <link href="/public/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
        <!-- Theme style -->
        <link href="/public/css/AdminLTE.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="/public/css/common.css">

        <!--[if lt IE 9]>
          <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <!-- CSS code from translate.com editor -->
        
        <style type="text/css">
            /*
           * Style tweaks
           * --------------------------------------------------
           */

          footer {
            padding-left: 15px;
            padding-right: 15px;
            background-color: #fff;
          }
          .container {
            max-width: 980px;
          }
          .navbar {
            margin-bottom: 0;
            border-radius: 0;
          }
          .jumbotron.user-header {
            position: relative;
            border-radius: 0;
            height: 300px;  
            background-image:url(http://img.t.sinajs.cn/t5/skin/public/profile_cover/006.jpg);
            margin-bottom: 0;
          }
          .jumbotron.user-header .profile-main {
            position: absolute;
            width: 100%;
            bottom: -116px;
            left: 20px;
          }
          .jumbotron.user-header .profile-main .media img {
            padding: 5px;
            background-color: #fff;
            border: 1px solid #ddd;
          }
          .jumbotron.user-header .profile-main .media .pull-left {
            margin-right: 20px;
          }
          .jumbotron.user-header .profile-main .media-body {
            margin-top: 76px;
          }
          .basic .basicContent {
            display: none;
            padding-left: 35px;
            padding-right: 35px;
            padding-top: 0;
            margin-top: 15px;
            margin-bottom: 15px;
            font-size: 16px;
            color: #999;
          }

          .skin-blue .navbar {
            background-color: #222;
          }
          .form-box .header {
            background-color: #535368;
          }
          .bg-modena {
            background-color: #535368!important;
          }
          .bg-modena.btn {
            color: #fff;
          }
          #formSignup label.error {
            color: red;
          }
          #loginWrap {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            background-color: #000;
            left: 0;
            vertical-align: center;
          }
          #login-box {
            display: inline-block;
          }

          /*here begin profile*/
          .custom-box h2,
          .custom-box h3 {
            margin-top: 0px;
            margin-bottom: 0px;
            border-left: 5px solid #eee;
            padding-left: 15px;
          }
          .custom-box .pure-btn {
            line-height: 34px;
            font-size: 18px;
          }
          .custom-box .panel-body p {
            font-size: 16px;
            color: #999;
          }
          .custom-box .panel-body {
            padding-left: 35px;
            padding-right: 35px;
            padding-top: 0;
            margin-top: 15px;
          }
          .custom-box .panel-heading i {
            cursor: pointer;
          }
          .custom-box .panel-heading i:hover {
            color: #72afd2;
          }
          .custom-box .media {
            padding: 0 15px 35px 35px;
          }
          .custom-box .media .add-icon {
            margin-top: 5px;
            margin-bottom: 5px;
          }
          .custom-box .media .add-icon i {
            font-size: 74px;
            color: #999;
          }
          .custom-box .media:hover .add-icon i {
            color: blue;
          }
          .custom-box .media-body {
            padding-top: 18px;
          }
          .custom-box .media-body a,
          .custom-box .media-body p {
            font-size: 16px;
          }
          .custom-box .media-body p {
            margin-bottom: 0;
          }
          .custom-box .settings .row div {
            margin-bottom: 15px;
          }
          .custom-box .change {
            display: none;
          }
          .custom-box .section:hover .change {
            display: block;
          }
          .custom-box .change i {
            font-size: 18px;
          }
          .custom-box .change .edit {
            margin-right: 10px;
          }
          .custom-box .change .edit:hover,
          .custom-box .change .delete:hover {
            color: blue;
          }
          .custom-box .user-avatar i {
            font-size: 74px;
          }
          .custom-box .user-info {
            padding-top: 0;
          }
          .custom-box .user-info p {
            font-size: 18px;
          }
          .custom-box .basic-settings .form-item  input,
          .custom-box .basic-settings .form-item  select {
            margin-bottom: 15px;
          }
          .custom-box .basic-settings-avatar a {
            width: 100%;
            text-align: center;
          }
          .custom-box .basic-settings-avatar i {
            font-size: 98px;
          }
          .custom-box .basic-settings-avatar div {
            text-align: center;
            font-size: 18px;
          }
          .custom-box .basic-edit {
            display: none;
          }
          .custom-box:hover .basic-edit {
            display: block;
          }
          .custom-box .edu-date {
            font-size: 18px;
            color: #999;
            padding-left: 15px;
          }
          .custom-box .edu-info {
            font-size: 16px;
            color: #999;
          }
          .custom-box .edu-desc {
            font-size: 16px;
            margin-top: 10px;
          }
          .custom-box .edu-school {
            font-size: 18px;
          }
          .custom-box .edu-box .content {
            padding: 10px 15px;
            margin-top: 5px;
            margin-bottom: 15px;
          }
          .custom-box .social-info div {
            font-size: 18px;
          }
          .custom-box .social-info .col-md-3 {
            text-align: right;
          }
          .custom-box .social-info {
            padding-top: 0;
            padding-bottom: 35px;
          }
          .custom-box .socail-settings input {
            margin-bottom: 15px;
          }
          .jumbotron h1 {
            font-size: 36px;
            margin-top: 0;
          }
          .header-info span, 
          .header-info a {
            font-size: 18px;
            margin-bottom: 10px;
          }
          .user-header input {
            background-color: transparent;
            display: inline-block;
            border: none;
          }
          .group {
            background-color: #f5f5f5;
            border: 1px solid #e3e3e3;
          }
          .group h2 {
            border-left: 5px solid #72afd2;
          }
          .group .panel-body .no-join {
            font-size: 18px;
            color: rgb(51, 51, 51);
          }
          .profile-sidebar .section {
            margin-bottom: 20px;
            border-radius: 4px;
          }
          .profile-sidebar .user-body {
            padding: 15px 0;
            background-color: #fff;
          }
          .section .panel-body .images a {
            display: inline-block;
          }
          .section .panel-body .images img {
            width: 34px;
            height: 34px;
          }
          .displayNone {
            display: none;
          }
          .no-notify {
            padding: 15px;
          }
          .notifications-menu .dropdown-menu {
            width: 130px!important;
          }
          /*group collects*/
          .collects {
            width: 100%;
            overflow: hidden;
          }
          .collects img {
            width: 55px;
            margin: 0 10px;
          }
          .collects .collects-container {
            width: 1120px;
          }
          /* circle */
          .circle hr {
            margin: 10px 0;
          }
          .circle .col-md-6 {
            padding-right: 0px;
          }
          .circle-item {
            display: inline-block;
            color: rgb(153, 153, 153);
            font-size: 0.9em;
          }
          /* skills */
          .tags hr {
            margin: 10px 0;
            margin-top: 7px;
          }
          .tags .tags-myCircle {
            font-size: 0.9em;
            color: rgb(153, 153, 153);
          }
          .tags .tags-myCircle .tag {
            color: rgb(51, 51, 51);
          }
          .tags-item {
            background: #eee;
            float: left;
            padding-left: 7px;
            padding-right: 7px;
            padding-top: 4px;
            padding-bottom: 4px;
            border-radius: 10px;
            margin: 0px 7px 6px 0;
            font-size: 0.9em;
            cursor: pointer;
          }
          .tags-item:hover {
            background: #9C9C9C;
            color: #FFF !important;
          }
          /* tooltip*/
          .asTooltip-content {
            width: 204px;
            height: 100px;
          }
          
          /* profile-image */
          .profile-avatar {
            height: 225px;
            position: relative;
          }
          .profile-avatar img {
            width: 100%;
            max-height: 255px;
            height: 100%;
          }
          .profile-avatar .profile-avatar-popover {
            position: absolute;
            width: 100%;
            left: 0;
            bottom: 0;
            height: 55px;
          }
          .profile-avatar .profile-avatar-popover .add-icon {
            line-height: 55px;
            height: 44px;
            color: #fff;
            background-color: rgba(46, 167, 224, 0.5);
            padding: 7px 10px;
            font-family: 微软雅黑;
            opacity: 0.5;
            cursor: pointer;
          }
          .profile-avatar .profile-avatar-popover .add-icon:hover {
            opacity: 1;
            background-color: rgba(46, 167, 224, 0.7);
          }
          /* footer */
          footer {
            border-top: 1px solid #E0E0E0;
            padding: 10px 0;
            text-align: left;
            background: #f9f9f9;
            color: #999;
          }
        </style>    
    </head>
    <body>
        <nav class="navbar navbar-inverse" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="#">Forin</a>
            </div>
            <div class="navbar-collapse collapse">
              <ul class="nav navbar-nav navbar-right">
                  <% if (!locals.author) { %>
                  <li class="dropdown" id="menuLogin" >
                      <a class="dropdown-toggle" href="/login?re=/profile/<%= locals.user.id %>">登录</a>
                  </li>
                  <% } else { %>
                  <li class="dropdown notifications-menu user-menu" id="menuNotify">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown" >
                            <i class="fa fa-bell"></i> 
                            <span class="label label-wraning"><%= (locals.request.connect + locals.request.group + locals.request.reply + locals.request.comment + locals.request.at) || '' %></span>
                        </a>
                        <ul class="dropdown-menu" class="request-container">
                            <% if (locals.request.connect > 0) { %>
                            <li><a href="/request/connect" target="_self"><%= locals.request.connect %>好友请求</a></li>
                            <% } %>
                            <% if (locals.request.group > 0) { %>
                            <li><a href="/request/group" target="_self"><%= locals.request.group %> 圈请求</a></li>
                            <% } %>
                            <% if (locals.request.reply > 0) { %>
                            <li><a href="/request/reply" target="_self"><%= locals.request.reply %> 回复</a></li>
                            <% } %>
                            <% if (locals.request.comment > 0) { %>
                            <li><a href="/request/comment" target="_self"><%= locals.request.comment %> 评论</a></li>
                            <% } %>
                            <% if (locals.request.at > 0) { %>
                            <li><a href="/request/at" target="_self"><%= locals.request.at %> @</a></li>
                            <% } %>
                            <% if (locals.request.group + locals.request.connect + locals.request.reply + locals.request.comment + locals.request.at === 0) { %>
                            <li class="no-notify">没有未处理的通知</li>
                            <% } %>
                        </ul>
                  </li>
                  <li class="dropdown user user-menu" id="menuUser">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <img src="<%= locals.author && locals.author.avatar %>" alt="" class="nav-user-pic img-responsive">             
                            <span id="lblUsername" style="margin-left: 5px;">
                              <%= locals.author && locals.author.name %>
                            </span>
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu">
                            <!-- User image -->
                            <li class="user-header bg-modena">
                                <img src="<%= locals.author && locals.author.avatar %>" class="img-circle" alt="User Image" class="user_avatar">
                                <p>
                                    <span class="user_username"> <%= locals.author &&locals.author.name %></span>
                                </p>
                            </li>
                            <!-- Menu Body -->
                            <li class="user-body">
                                <div class="col-xs-6 text-center">
                                    <a href="#" ><%= locals.shareCount %></a>
                                </div>
                                <div class="col-xs-6 text-center">
                                    <a href="#"><%= locals.author.connects.length %></a>
                                </div>
                                <div class="col-xs-6 text-center">
                                    <a href="#">微说</a>
                                </div>
                                <div class="col-xs-6 text-center">
                                    <a href="#">人脉</a>
                                </div>
                            </li>
                            <!-- Menu Footer-->
                            <li class="user-footer">
                                <div class="pull-left">
                                    <a href="/settings/account" target="_self" class="btn btn-default btn-flat">账户</a>
                                </div>
                                <div class="pull-right">
                                    <a href="#" class="btn btn-default btn-flat" id="btnLogout">退出</a>
                                </div>
                            </li>
                        </ul>
                  </li>
                  <% } %>
              </ul>
              <ul class="nav navbar-nav navbar-left">
                <li><a href="/home" target="_self">首页</a></li>
                <li class="active"><a href="/profile" target="_self">个人主页</a></li>
                <li><a href="/group" target="_self">圈子</a></li>
                
              </ul>
            </div>
          </div>
        </nav>
        <div class="container"> 
          <div class="jumbotron user-header">
            <% if (locals.author && locals.author.id === locals.user.id) { %>
            <a class="btn btn-primary pull-right" href="/settings/profile" target="_self">编辑</a>
            <% } %>
            <h1><span><%= locals.user.name %></span></h1>
            <p class="desc"><span><%= locals.user.signature || 'add your signature' %></span> </p>
          </div>
          <div class="panel">
            <div class="panel-body" style="background-color:#ddd;">  
              <div class="media">
                <span class="pull-left" style="width:207px;margin-right:15px;">
                  <div class="section">
                    <div class="user-header bg-modena text-center profile-avatar " style="height:180px;">
                        <img src="<%= locals.user.avatar %>" alt="User Image">
                    </div>
                  </div>
                  <div class="panel" style="border-top-left-radius:0;border-top-right-radius:0;">
                    <div class="panel-body clearfix">
                      <div class="text-left" style="font-size:0.9em; display:inline-block;">
                          <div style="margin-bottom:3px;"><span style="color:#999;">状态： </span> <span><%= locals.user.location %> | <%= locals.user.occupation %></span></div>
                          <% if (locals.user.isStudent) { %>
                          <div><span style="color:#999;">教育： </span> <span><%= locals.user.school %></span></div>
                          <% } else { %>
                          <div><span style="color:#999;">目前就职： </span> <span><%= locals.user.isFreelance ? 'freelance' : locals.user.company %></span></div>
                          <% if (locals.user.school) { %>
                          <div><span style="color:#999;">教育： </span> <span><%= locals.user.school %></span></div>
                          <% } %> 
                          <% } %> 

                          <!-- <a href="#" class="btn btn-primary btn-sm">Connect</a> -->
                      </div>
                    </div>
                  </div>
                  <div class="panel panel-default section">
                    <div class="panel-heading clearfix">
                      人脉圈
                    </div>
                    <div class="panel-body">
                      <div class="images">
                        <% locals.connects.forEach(function(item,key){ %>
                        <a href="/profile/<%= item.id %>" class="userCard" title="<%= item.name %>"><img src="<%= item.avatar %>" alt="laolei"></a>
                        <% }) %>  
                        <% if (locals.connects.length === 0) { %>
                        <p> 还没有添加好友 !</p>
                        <% } %> 
                      </div>
                    </div>
                  </div>
                  <div class="panel panel-default section tags">
                    <div class="panel-heading clearfix">
                      擅长技能
                    </div>
                    <div class="panel-body">
                      <% if (locals.user.skills.length === 0) { %>
                      暂时还没有添加任何技能!
                      <% } %>
                      <div class="clearfix">
                        <% locals.user.skills.forEach(function(item,key){ %>
                        <span class="tags-item"><%= item.name %></span>
                        <% }) %>  
                      </div>
                    </div>
                  </div>
                  <div class="panel panel-default section">
                    <div class="panel-heading">最近关注</div>
                    <div class="panel-body">
                      最近没有关注
                    </div>
                  </div>
                </span>
                <div class="media-body">           
                  <div class="panel custom-box basic">
                    <div class="panel-heading">
                      <h3 class="clearfix">基本资料
                        <span class="pull-right" id="basicTrigger"><i class="fa fa-fw fa-chevron-down"></i></span>
                      </h3>
                    </div>
                    <% if (locals.user.isPubicBasic) { %>
                    <div class="media basicContent basicHide" id='basicContent'>
                      <div class="media-body user-info">
                        <p><%= locals.user.real_name %> | <%= locals.user.sex %> | <%= locals.user.degree %> | <%= locals.user.workYear %> 年工作经验</p>
                        <p> <%= locals.user.phone %>  <%= locals.user.email %></p>
                      </div>
                    </div>
                    <% } else { %>
                    <div class="basicContent basicHide" id="basicContent">用户未公开基本资料 !</div>
                    <% } %>
                  </div>
                  
                  <% if (locals.profile.desc) { %>
                  <div class="panel custom-box">
                    <div class="panel-heading">
                      <h3>自我描述</h3>
                    </div>
                    <div class="panel-body">
                      <div class="section">
                        <p><%= locals.profile.desc %></p>
                      </div>
                    </div>
                  </div>
                  <% } %>

                  <div class="panel custom-box">
                    <div class="panel-heading">
                      <h3>经验</h3>
                    </div>
                    <div class="panel-body">    
                      <% locals.profile.experience.forEach(function(item,key){ %>
                          <div class="section">
                            <h4><%= item.company %>-<%= item.title %> <small><%= item.startYear %>/<%= item.startMonth %>-<%= item.endYear %>/<%= item.endMonth %></small></h4>
                            <p><%= item.desc %></p>
                          </div>
                          <hr class="<%if(key === locals.profile.experience.length -1){%> displayNone <%}%>">
                      <% }) %>  
                    </div>
                  </div> 
                  <div class="panel custom-box">
                    <div class="panel-heading">
                      <h3>作品</h3>
                    </div>
                    <div class="panel-body">
                      <% locals.profile.works.forEach(function(item,key){ %>
                          <div class="section">
                            <h4>URL: <a href="#"><%= item.url %></a></h4>
                            <p><%= item.desc %></p>
                          </div>
                          <hr class="<%if(key === locals.profile.works.length -1){%> displayNone <%}%>">
                      <% }) %>  
                    </div>
                  </div>  
                  <div class="panel custom-box education">
                    <div class="panel-heading">
                      <h3>教育经历</h3>
                    </div>
                    <div class="panel-body edu-box">
                      <div class="row">
                        <% locals.profile.edu.forEach(function(item,key){ %>
                          <div class="col-md-6 section">
                            <span class="edu-date"><%= item.startYear %>/<%= item.startMonth %>--<%= item.endYear %>/<%= item.endMonth %></span>
                            <div class="content">
                              <div class="edu-school"> <%= item.school %></div>
                              <div class="edu-info">
                                <span><%= item.field %> | <%= item.degree %></span>
                              </div>
                              <div class="edu-desc"><%= item.desc %></div>
                            </div>
                          </div>
                        <% }) %>
                      </div>
                    </div>
                  </div>   
                  <div class="panel custom-box social">
                    <div class="panel-heading">
                      <h3>社交网络</h3>
                    </div>
                    <div class="panel-body social-info">
                      <% locals.profile.social.forEach(function(item,key){ %>
                          <div class="clearfix section">
                            <div class="row">
                              <div class="col-md-3"><%= item.name %>:</div>
                              <div class="col-md-6"><a href="#"><%= item.id %></a></div>
                            </div>  
                          </div>
                      <% }) %>
                    </div>
                  </div>
                  <div class="panel custom-box group">
                    <div class="panel-heading">
                      <h3>参与群组</h3>
                    </div>
                    <div class="panel-body">
                      <% if (locals.groups.length === 0) { %>
                      <p class="no-join text-center" style="display:none;"> 你还没加入任何群 ！</p>
                      <% } %> 
                      <div class="collects">
                        <div class="collects-container">
                          <% locals.groups.forEach(function(item,key){ %>
                              <a href="/group/<%= item.id %>" title="<%= item.name %>"><img src="<%= item.avatar %>"></a>
                          <% }) %>  
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div> 
            </div>
          </div>                      
        </div>
        <footer class="text-center">
          <p class="">© by Joeylin 331547274@qq.com <a href="/about/feedback" target="_blank">意见与反馈</a></p>
        </footer>
        <script type="text/javascript" src="/public/js/lib/jquery-1.9.1.min.js"></script>
        <script type="text/javascript" src="/public/js/lib/bootstrap.min.js"></script>
        <script type="text/javascript">
          $(document).ready(function() {
            $('#btnLogout').click(function() {
                $.ajax({
                    url: "/api/user/logout",
                    type: "post",
                    success: function(data) {
                        if (data.code === 200) {
                            window.location.reload();
                        }
                    }
                });
            });
            $('#basicTrigger').on('click', function() {
              var $content = $('#basicContent');
              if ($content.hasClass('basicHide')) {
                $('#basicTrigger i').removeClass('fa-chevron-down').addClass('fa-chevron-up');
                $content.slideDown(function() {
                  $content.removeClass('basicHide');
                });
              } else {
                $('#basicTrigger i').removeClass('fa-chevron-up').addClass('fa-chevron-down');
                $content.slideUp(function() {
                  $content.addClass('basicHide');
                });
              }
            });
            
          });
        </script>
    </body>
</html>
      